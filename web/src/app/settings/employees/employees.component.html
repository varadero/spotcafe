<div class="settings-feature">
    <spotcafe-messages #loadEmployeesMessagesComponent></spotcafe-messages>
    <md-card *ngIf="employeesWithRoles && roles">
        <md-card-title>Existing employees</md-card-title>
        <md-select class="employee-drop-down" [(ngModel)]="selectedEmployeeWithRoles">
            <md-option *ngFor=" let employeeWithRole of employeesWithRoles" [value]="employeeWithRole">{{employeeWithRole.employee.username}} ({{employeeWithRole.employee.firstName}} {{employeeWithRole.employee.lastName}})</md-option>
        </md-select>
        <div *ngIf="selectedEmployeeWithRoles">
            <md-form-field>
                <input mdInput [(ngModel)]="selectedEmployeeWithRoles.employee.firstName" placeholder="First name" />
            </md-form-field>
            <md-form-field>
                <input mdInput [(ngModel)]="selectedEmployeeWithRoles.employee.lastName" placeholder="Last name" />
            </md-form-field>
            <md-form-field>
                <input mdInput [(ngModel)]="selectedEmployeeWithRoles.employee.email" placeholder="Email" />
            </md-form-field>
            <md-checkbox [(ngModel)]="selectedEmployeeWithRoles.employee.disabled">Disabled</md-checkbox>
            <spotcafe-messages #updateEmployeeMessagesComponent></spotcafe-messages>
            <md-card-actions>
                <button md-raised-button (click)="updateEmployeeWithRoles(selectedEmployeeWithRoles)" color="primary">Update {{selectedEmployeeWithRoles.employee.username}} ({{selectedEmployeeWithRoles.employee.firstName}} {{selectedEmployeeWithRoles.employee.lastName}})</button>
            </md-card-actions>
            <div>Roles</div>
            <md-list>
                <md-list-item *ngFor="let role of selectedEmployeeWithRoles.roles">
                    <md-checkbox [(ngModel)]="role.selected">
                        {{role.name}} : {{role.description}}
                    </md-checkbox>
                </md-list-item>
            </md-list>
        </div>
    </md-card>
    <md-card>
        <md-card-title>New employee</md-card-title>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.employee.username" maxlength="250" placeholder="User name" />
            <md-error>User name is required</md-error>
        </md-form-field>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.employee.firstName" placeholder="First name" />
        </md-form-field>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.employee.lastName" placeholder="Last name" />
        </md-form-field>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.employee.email" placeholder="Email" />
        </md-form-field>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.password" type="password" placeholder="Password" />
        </md-form-field>
        <md-form-field>
            <input mdInput [(ngModel)]="newEmployeeWithRoles.confirmPassword" type="password" placeholder="Confirm password"
            />
        </md-form-field>
        <spotcafe-messages *ngIf="newEmployeeErrors.usernameNotSupplied" [staticMessage]="{text:
            'User name can not be empty', type: 'error'}"></spotcafe-messages>
        <spotcafe-messages *ngIf="newEmployeeErrors.passwordsDontMatch" [staticMessage]="{text:
            'Passwords do not match', type: 'error'}"></spotcafe-messages>
        <spotcafe-messages #newEmployeeMessagesComponent></spotcafe-messages>
        <md-card-actions>
            <button md-raised-button (click)="createEmployeeWithRoles(newEmployeeWithRoles)" color="primary">Create {{newEmployeeWithRoles.employee.username}}</button>
        </md-card-actions>
    </md-card>
</div>